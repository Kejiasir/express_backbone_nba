fs = require 'fs'
path = require 'path'
littleUtil = {}
littleUtil.requireDirModules = (dir)->
    files = (fs.readdirSync dir).filter (file)->
        file_path = path.join dir, file
        (fs.statSync file_path).isFile() and 'index' isnt path.basename file_path, path.extname file_path
    exports_obj = {}
    files.forEach (file)->
        file = path.basename file, path.extname file
        exports_obj[file] = require path.join dir, file
    exports_obj
littleUtil.__initModules = (global)->
    global._ = require 'underscore'
    global.async = require 'async'
littleUtil.requireModules = (modules,requireCommon)->
    if (typeof modules) is 'string'
        modules = modules.split /\s+/
    modules.forEach (module)->
        global[module] = require module
    if requireCommon
        littleUtil.__initModules global
    global
module.exports = littleUtil